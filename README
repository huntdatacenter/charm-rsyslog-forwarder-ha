# General

This Charm provides support for adding a [rsyslog](http://www.rsyslog.org) forwarder listener to any service 
in addition this charm allows to have multiple rsyslog aggregators servers offering currently 2 replication
modes ( fanout, failover ).

# Usage method

This is a subordinate charm, which means it requires to have a service to hook in.

```shell
    juju deploy mysql
```

Once your service is running, you can relate this charm:

```shell
    juju add-relation rsyslog-forwarder-ha mysql
```

Then you can deploy your rsyslog aggregators servers:

```shell
    juju deploy rsyslog primary
    juju deploy rsyslog secondary
```

Once your rsyslog aggregators are ready, you can relate them with your forwarder.

```shell
    juju add-relation rsyslog-forwarder-ha primary
    juju add-relation rsyslog-forwarder-ha secondary
```

By default the 'fanout' replication mode is going to be used, which means that all the 
syslog messages will be forwarder to any aggregator server using UDP port 514.

In you want to choose to failover mode, this will require that your current
rsyslog servers is binded to TCP port 514.

Once you have your rsyslog ports opened. You can change the replication-mode variable
on your rsyslog-forwarder-ha charm.

```shell
    juju set rsyslog-forwarder-ha replication-mode="failover"
```

# Contact Information

    Mantainer: jorge.niedbalski@canonical.com
